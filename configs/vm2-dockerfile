FROM ubuntu:20.04
ENV TZ=Europe/Oslo
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime  && echo $TZ > /etc/timezone
RUN apt-get -y update
RUN apt install iputils-ping -y
RUN apt install net-tools -y
RUN apt install nano -y
RUN apt install vim -y
RUN apt install wget -y
RUN apt install curl -y

# vm2 specific commands
RUN apt install nginx -y
RUN unlink /etc/nginx/sites-enabled/default
COPY data2410-portfolio2/vm_data/nginx/reverse-proxy.conf /etc/nginx/sites-available/reverse-proxy.conf
RUN ln -s /etc/nginx/sites-available/reverse-proxy.conf /etc/nginx/sites-enabled/reverse-proxy.conf

# Testing to see if the service works as intended
RUN service nginx configtest
RUN service nginx restart

#command to make the container stay open
CMD ["tail", "-f", "/dev/null"]
